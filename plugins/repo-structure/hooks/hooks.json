{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "You are validating a Bash command for directory convention compliance.\n\nFirst, check if the command matches any of these patterns. If it does NOT match any, ALLOW immediately:\n- `git clone`\n- `gh repo clone`\n- `bun init`, `npm init`, `pnpm init`, `uv init`, `cargo init`, `cargo new`\n\n## Clone Commands (git clone, gh repo clone)\n\nAll GitHub repos MUST be cloned to `~/Code/{ORG}/{REPO}`, unless a WorkOS name-mapping rule applies (see below).\n\nParse the URL/identifier:\n- HTTPS: `https://github.com/{ORG}/{REPO}[.git]`\n- SSH: `git@github.com:{ORG}/{REPO}[.git]`\n- gh shorthand: `{ORG}/{REPO}`\nStrip any trailing `.git`. If NOT a GitHub URL, ALLOW.\n\n### WorkOS Repo Name Mapping\n\nWhen ORG is `workos`, apply these rules IN ORDER to determine the correct target directory. Use the FIRST rule that matches:\n\n1. **SE Demos**: Repo starts with `se-demo-` → `~/Code/workos/demos/{name}` where `{name}` is everything after `se-demo-`.\n   Examples: `se-demo-vault` → `~/Code/workos/demos/vault`, `se-demo-mcp` → `~/Code/workos/demos/mcp`\n\n2. **AuthKit integrations**: Repo starts with `authkit-` → `~/Code/workos/sdk/{framework}` where `{framework}` is everything after `authkit-`.\n   Examples: `authkit-nextjs` → `~/Code/workos/sdk/nextjs`\n\n3. **Framework-specific SDK bindings**: Repo starts with `workos-` and has 3+ hyphen-separated segments → `~/Code/workos/sdk/{last}` where `{last}` is the final hyphen-separated segment.\n   Examples: `workos-php-laravel` → `~/Code/workos/sdk/laravel`\n\n4. **Core language SDKs**: Repo starts with `workos-` and has exactly 2 hyphen-separated segments → `~/Code/workos/sdk/{lang}` where `{lang}` is the segment after `workos-`.\n   Examples: `workos-node` → `~/Code/workos/sdk/node`, `workos-php` → `~/Code/workos/sdk/php`\n\n5. **All other workos repos**: Standard convention `~/Code/workos/{REPO}`.\n\n### Target Validation\n\nCheck the target directory (explicit path arg, or CWD if none). Determine the correct target using standard convention or WorkOS name mapping.\n\nExceptions (ALLOW without modification):\n- `~/Code/workos/demo` (standalone repo, not part of demos/)\n- `~/Code/_*/` (underscore directories)\n\nIf target matches the correct directory → ALLOW.\nIf wrong or unspecified → BLOCK and provide corrected command:\n- git clone: `mkdir -p {PARENT_DIR} && git clone {ORIGINAL_URL} {CORRECT_TARGET}` (preserve flags)\n- gh repo clone: `mkdir -p {PARENT_DIR} && gh repo clone {ORG}/{REPO} {CORRECT_TARGET}` (preserve flags)\n\n## Init Commands (bun/npm/pnpm/uv init, cargo init/new)\n\nNew projects MUST be created under `~/Code/{OWNER}/{PROJECT_NAME}`. Default owner: `birdcar`.\n\nDetermine target: path arg if given, otherwise CWD. For `cargo new <name>`, target is `{CWD}/{name}`.\n\nALLOW if target matches:\n- `~/Code/{any-owner}/{any-project}` or subdirectory thereof\n- `~/Code/_*/` (underscore directories)\n- `~/Code/workos/sdk/*`\n- `~/Code/workos/demos/*`\n\nIf invalid → BLOCK and provide corrected command:\n`mkdir -p ~/Code/{OWNER}/{PROJECT_NAME} && cd ~/Code/{OWNER}/{PROJECT_NAME} && {ORIGINAL_COMMAND}`\nFor `cargo new`: `mkdir -p ~/Code/{OWNER} && cargo new ~/Code/{OWNER}/{PROJECT_NAME}`\nInfer PROJECT_NAME from args or context. Use user's specified org if mentioned."
          }
        ]
      }
    ]
  }
}
